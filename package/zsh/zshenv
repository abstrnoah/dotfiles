# zshenv

_br_nix_profile_daemon="_/nix/var/nix/profiles/default/etc/profile.d/nix-daemon.sh"
test -f "${_br_nix_profile_daemon}" && {
    source "${_br_nix_profile_daemon}"
}

export PATH="${HOME}/.bin:${HOME}/.local/bin:${PATH}:/sbin:/opt/jabref/bin"
export BR_DOTFILES="${BR_DOTFILES:-${HOME}/.dotfiles}"
export EDITOR="${HOME}/.nix-profile/bin/vim"
export VISUAL="${HOME}/.nix-profile/bin/vim"
export BROWSER="${HOME}/.nix-profile/bin/qutebrowser"
export XDG_DATA_DIRS="${HOME}/.nix-profile/share:${XDG_DATA_DIRS}:/usr/share"

# Make locales work with Nix.
export LOCALE_ARCHIVE="$(readlink ~/.nix-profile/lib/locale)/locale-archive"

# Use nix's Java.
export JAVA_HOME="$(readlink ~/.nix-profile)/lib/openjdk"

# Pin nixpkgs.
export BR_NIXPKGS="https://github.com/abstractednoah/nixpkgs/archive/ef01553ac5d763d2a7816051d30e92905a036364.tar.gz"
export BR_NIXPKGS_LOCAL="${HOME}/repository/know/explore/cs/nixpkgs"

# Enable firefox touch screen scrolling.
export MOZ_USE_XINPUT2=1

# # maven: Fix Java version.
# TODO These aliases shouldn't be necessary since JAVA_HOME is exported above,
# but in that case I'm not sure why I had these lines lol.
# if command -v mvn &> /dev/null; then
#     alias mvn='JAVA_HOME=${JAVA_HOME} mvn'
#     alias mvnDebug='JAVA_HOME=${JAVA_HOME} mvnDebug'
# fi

export GTK_THEME=Adwaita:dark

# Disable QT_XCB_GL_INTEGRATION globally because at least two tools (anki and
# qutebrowser) require it as a workaround. TODO
export QT_XCB_GL_INTEGRATION=none
