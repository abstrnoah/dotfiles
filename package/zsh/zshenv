#
# Global environment
#

export PATH="${HOME}/.dotfiles/bin:${PATH}"
export EDITOR=vim
export VISUAL=vim
export XDG_DATA_DIRS="${HOME}/.nix-profile/share:${XDG_DATA_DIRS}"

# Make locales work with Nix.
export LOCALE_ARCHIVE="$(readlink ~/.nix-profile/lib/locale)/locale-archive"

# Fix Java version.
JAVA_HOME="$(readlink ~/.nix-profile)/lib/openjdk"

# Pin nixpkgs at personal master fork.
export AN_NIXPKGS="https://github.com/abstractednoah/nixpkgs/archive/an-master.tar.gz"
# NIX_PATH gets overridden by Nix's site-wide profile, which is sourced from
# '/etc/profile', which is sourced from 'zprofile'. For mitigation, see the
# 'nix-env' alias below.
# export NIX_PATH="an_nixpkgs=${AN_NIXPKGS}"

#
# App-specific environments
#

# firefox: Enable touch screen scrolling.
alias firefox='MOZ_USE_XINPUT2=1 firefox'

# xournalpp: Dark theme.
alias xournalpp='GTK_THEME=Adwaita:dark xournalpp'

# maven: Fix Java version.
alias mvn='JAVA_HOME=${JAVA_HOME} mvn'
alias mvnDebug='JAVA_HOME=${JAVA_HOME} mvnDebug'

# Nix
alias nix-env-defexpr=$(which nix-env)
# Yes, it is probably redundant to have both -I and -f.
alias nix-env='nix-env -I an_nixpkgs=${AN_NIXPKGS} -f ${AN_NIXPKGS}'


# FIXME TODO This is actually killing me.
# This should NOT go here, but it doesn't work anywhere else. Something very
# late in the login process is overwritting this setting.
# /usr/bin/setxkbmap -option caps:ctrl_modifier
